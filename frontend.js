var mailbox={idx:0,action:0,account_id:[0,0,0,0,0,0,0,0],account_name:""},base=623056584704;function call_native(){write_ptr_at(base+16,mailbox.idx),write_ptr_at(base+24,mailbox.action),write_mem(base+32,mailbox.account_id);for(var e=unescape(encodeURIComponent(mailbox.account_name)).substring(0,16),a=[],t=0;t<e.length;t++)a.push(e.charCodeAt(t));a.push(0),write_mem(base+40,a),pivot(base),mailbox.idx=read_ptr_at(base+16),mailbox.action=read_ptr_at(base+24),mailbox.account_id=read_mem(base+32,8),a=read_mem(base+40,17),e="";for(t=0;a[t];t++)e+=String.fromCharCode(a[t]);mailbox.account_name=decodeURIComponent(escape(e))}function makeUI(){var e=document.createElement("div");e.style.position="absolute",e.style.top=e.style.left=0,e.style.width=e.style.height="100%",e.style.zIndex=1e3,e.style.background="white";var a=document.createElement("p");e.appendChild(a);var t=document.createElement("i");a.appendChild(t),t.appendChild(document.createTextNode("Clique no nome de usuário para gerar um ID aleatório"));var n=document.createElement("table");e.appendChild(n);for(var i=[],o=0;o<16;o++){var d=document.createElement("tr");n.appendChild(d);var r=document.createElement("td");d.appendChild(r);var c=document.createElement("td");d.appendChild(c);var u=document.createElement("input");c.appendChild(u);c=document.createElement("td");d.appendChild(c);d=document.createElement("button");c.appendChild(d),d.appendChild(document.createTextNode("Definir e Ativar")),i.push({username:r,id:u,button:d})}return document.body.appendChild(e),i}var ui=makeUI();function setRandomID(e){for(var a="",t=0;t<16;t++)a+="0123456789ABCDEF"[16*Math.random()|0];return ui[e].id.value=a,!1}function fetchAccount(e){for(mailbox.idx=e,mailbox.action=0,call_native();ui[e].username.firstChild;)ui[e].username.removeChild(ui[e].username.firstChild);if(!mailbox.account_name){var a=document.createElement("i");return ui[e].username.appendChild(a),a.appendChild(document.createTextNode("conta não existe")),ui[e].id.value="",ui[e].id.readOnly=!0,void(ui[e].button.disabled=!0)}for(var t="",n=7;0<=n;n--){var i=mailbox.account_id[n];t+="0123456789ABCDEF"[i>>4],t+="0123456789ABCDEF"[15&i]}ui[e].username.appendChild(document.createTextNode(mailbox.account_name)),ui[e].id.value=t,ui[e].id.readOnly=!1,ui[e].button.disabled=!1}function fetchAccounts(){for(var e=0;e<16;e++)fetchAccount(e)}function activateAccount(e){mailbox.idx=e;var a=ui[e].id.value;16!=a.length&&(a="XXXXXXXXXXXXXXXX");for(var t=[],n=7;0<=n;n--){var i=16*parseInt(a[2*n],16)+parseInt(a[2*n+1],16);if(i!=i)return void alert("Deve ter 16 caracteres e conter apenas [0-9A-F]");t.push(i)}return mailbox.action=1,mailbox.account_id=t,call_native(),fetchAccounts(),ui[e].id.value==a.toUpperCase()&&alert("ID PSN definido com sucesso!"),!1}fetchAccounts();for(var i=0;i<16;i++)ui[i].username.onclick=setRandomID.bind(window,i),ui[i].button.onclick=activateAccount.bind(window,i);